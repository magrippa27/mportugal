---
import { type Language, useTranslations } from '../i18n/utils';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  slug: string;
  lang: Language;
  categories?: string[];
  heroImage?: string | null;
}

const { title, description, pubDate, slug, lang, categories = [], heroImage } = Astro.props;
const t = useTranslations(lang);
const finalHeroImage = heroImage || '/placeholders/other-post-default.jpg';

const formattedDate = pubDate.toLocaleDateString(lang === 'es' ? 'es-ES' : 'en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<article class="academic-post-card">
  <a href={`/${lang}/blog/${slug}`} class="post-link">
    <div class="light-wood-frame">
      <div class="light-wood-inner">
    <div class="post-card-content">
      <div class="post-image-wrapper">
        <img src={finalHeroImage} alt={title} class="post-image" />
      </div>
      
      <div class="post-text">
        <time datetime={pubDate.toISOString()} class="post-date">{formattedDate}</time>
        {categories.length > 0 && (
          <div class="categories">
            {categories.map(cat => (
              <span class="category-badge">
                {t(`blog.category.${cat}`)}
              </span>
            ))}
          </div>
        )}
        <h3 class="post-title">{title}</h3>
        <p class="post-description">{description}</p>
        <div class="read-more">{t('blog.readMore')} â†’</div>
      </div>
    </div>
      </div>
    </div>
  </a>
</article>

<style>
  .academic-post-card {
    height: 100%;
  }

  .light-wood-frame {
    background: linear-gradient(135deg, #8b7355 0%, #6d563d 50%, #8b7355 100%);
    border-radius: 8px;
    padding: 10px;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
    position: relative;
    height: 100%;
    transition: transform 0.3s ease;
  }

  .light-wood-frame:hover {
    transform: translateY(-4px);
  }


  .light-wood-inner {
    background: linear-gradient(180deg, rgba(139, 115, 85, 0.25) 0%, rgba(109, 86, 61, 0.35) 50%, rgba(139, 115, 85, 0.25) 100%);
    border-radius: 4px;
    padding: 10px;
    height: 100%;
  }

  .post-link {
    display: block;
    height: 100%;
  }

  .post-image-wrapper {
    width: 100%;
    height: 180px;
    overflow: hidden;
  }

  .post-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .post-card-content {
    background: white;
    border-radius: 4px;
    overflow: hidden;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    height: 100%;
    display: flex;
    flex-direction: column;
    transition: box-shadow 0.3s ease;
  }

  .light-wood-frame:hover .post-card-content {
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
  }

  .post-text {
    padding: 16px;
    display: flex;
    flex-direction: column;
    flex: 1;
  }

  .post-date {
    font-size: 0.75rem;
    color: #6b7280;
    margin-bottom: 8px;
  }

  .categories {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 10px;
  }

  .category-badge {
    display: inline-block;
    padding: 3px 10px;
    background: #e5e7eb;
    color: #4b5563;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 500;
  }

  .post-title {
    font-size: 1.125rem;
    font-weight: 700;
    color: #1f2937;
    margin: 0 0 8px 0;
    line-height: 1.3;
  }

  .post-description {
    font-size: 0.875rem;
    line-height: 1.6;
    color: #4b5563;
    margin: 0 0 12px 0;
    flex-grow: 1;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .read-more {
    font-size: 0.875rem;
    font-weight: 600;
    color: #4a5b75;
    text-decoration: underline;
  }
</style>

