---
import { type Language, useTranslations } from '../i18n/utils';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  slug: string;
  lang: Language;
  categories?: string[];
  heroImage?: string | null;
}

const { title, description, pubDate, slug, lang, categories = [], heroImage } = Astro.props;
const t = useTranslations(lang);

const formattedDate = pubDate.toLocaleDateString(lang === 'es' ? 'es-ES' : 'en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<article class="bg-white rounded-lg border-2 border-gray-300 overflow-hidden hover:shadow-lg transition-shadow">
  {heroImage && (
    <img 
      src={heroImage} 
      alt={title}
      class="w-full h-48 object-cover"
    />
  )}
  <div class="p-6">
    <time datetime={pubDate.toISOString()} class="block text-sm text-gray-500 mb-2">
      {formattedDate}
    </time>
    {categories.length > 0 && (
      <div class="flex flex-wrap gap-2 mb-3">
        {categories.map(cat => (
          <span class="inline-block px-3 py-1 text-xs font-medium rounded-full bg-primary-100 text-primary-800">
            {t(`blog.category.${cat}`)}
          </span>
        ))}
      </div>
    )}
    <h3 class="text-xl font-bold mb-3 text-gray-900">
      <a href={`${import.meta.env.BASE_URL}${lang}/blog/${slug}`} class="hover:text-primary-700 transition-colors">
        {title}
      </a>
    </h3>
    <p class="text-gray-600 mb-4 line-clamp-3">
      {description}
    </p>
    <a 
      href={`${import.meta.env.BASE_URL}${lang}/blog/${slug}`}
      class="text-primary-700 hover:text-primary-900 font-medium underline inline-flex items-center"
    >
      {t('blog.readMore')} â†’
    </a>
  </div>
</article>

