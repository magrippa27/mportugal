---
import { getCollection } from 'astro:content';
import MainLayout from '../../layouts/MainLayout.astro';
import { type Language, useTranslations, languages } from '../../i18n/utils';

export async function getStaticPaths() {
  return Object.keys(languages).map(lang => ({ params: { lang } }));
}

const { lang } = Astro.params as { lang: Language };
const t = useTranslations(lang);

const aboutPages = await getCollection('page');
const aboutPage = aboutPages.find(p => p.id === `about.${lang}`);
---

<MainLayout 
  title={t('about.title')}
  description={t('site.tagline')}
  lang={lang}
>
  <section class="relative h-[400px] flex items-center justify-center overflow-hidden">
    <div class="absolute inset-0 z-0">
      <img 
        src="/MDEPORTUAL.jpg" 
        alt={t('about.title')}
        class="w-full h-full object-cover object-[center_30%]"
      />
      <div class="absolute inset-0 bg-black bg-opacity-50"></div>
    </div>
    <div class="relative z-10 text-center px-4 sm:px-6 lg:px-8">
      <h1 class="text-5xl md:text-6xl font-bold text-white drop-shadow-lg">
        {t('about.title')}
      </h1>
    </div>
  </section>

  <article class="py-16">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      
      {aboutPage && (
        <div class="prose prose-lg max-w-prose mx-auto prose-headings:font-bold prose-a:text-primary-700 prose-a:underline hover:prose-a:text-primary-900">
          <div set:html={aboutPage.body} />
        </div>
      )}
    </div>
  </article>
</MainLayout>

